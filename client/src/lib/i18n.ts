import { create } from 'zustand';
import { persist } from 'zustand/middleware';

type Language = 'en' | 'id';

interface I18nState {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations: Record<Language, Record<string, string>> = {
  en: {
    'nav.dashboard': 'Dashboard',
    'nav.pos': 'Point of Sale',
    'nav.products': 'Products',
    'nav.settings': 'Settings',
    'nav.logout': 'Logout',
    'pos.title': 'Point of Sale',
    'pos.search': 'Search products...',
    'pos.cart': 'Current Order',
    'pos.empty_cart': 'Cart is empty',
    'pos.subtotal': 'Subtotal',
    'pos.tax': 'Tax (10%)',
    'pos.total': 'Total',
    'pos.process_payment': 'Process Payment',
    'pos.payment_method': 'Payment Method',
    'pos.cash': 'Cash',
    'pos.card': 'Card',
    'pos.qris': 'QRIS',
    'pos.ewallet': 'E-Wallet',
    'pos.confirm_payment': 'Confirm Payment',
    'pos.processing': 'Processing...',
    'pos.cancel': 'Cancel',
    'pos.low_stock': 'Low Stock',
    'pos.all': 'All',
    'pos.open_shift': 'Open Cashier Shift',
    'pos.start_shift': 'Start Shift',
    'pos.starting_cash': 'Starting Cash',
    'pos.shift_open': 'Shift Open since',
    'pos.cash_received': 'Cash Received',
    'pos.transaction_id': 'Transaction ID',
    'receipt.title': 'Receipt',
    'receipt.print': 'Print Receipt',
    'receipt.new_sale': 'New Sale',
    'receipt.thank_you': 'Thank you for your purchase!',
    'receipt.date': 'Date',
    'receipt.cashier': 'Cashier',
    'receipt.payment': 'Payment',
    'receipt.items': 'Items',
    'products.title': 'Products',
    'products.add': 'Add Product',
    'products.edit': 'Edit Product',
    'products.delete': 'Delete',
    'products.name': 'Name',
    'products.category': 'Category',
    'products.price': 'Price',
    'products.stock': 'Stock',
    'products.image': 'Image URL',
    'products.save': 'Save',
    'dashboard.title': 'Dashboard',
    'dashboard.subtitle': 'Overview of your store performance (last 7 days)',
    'dashboard.total_revenue': 'Total Revenue',
    'dashboard.revenue': 'Total Revenue',
    'dashboard.transactions': 'Transactions',
    'dashboard.avg_sale': 'Average Sale',
    'dashboard.low_stock': 'Low Stock',
    'dashboard.need_restock': 'Need restock',
    'dashboard.last_7_days': 'Last 7 days',
    'dashboard.per_transaction': 'Per transaction',
    'dashboard.weekly_revenue': 'Weekly Revenue',
    'dashboard.weekly_desc': 'Daily sales performance for the last 7 days',
    'dashboard.sales_trend': 'Sales Trend (7 Days)',
    'dashboard.top_products': 'Top Selling Products',
    'dashboard.top_products_desc': 'Best performing products by sales',
    'dashboard.no_data': 'No data available',
    'settings.title': 'Settings',
    'settings.general': 'General Configuration',
    'settings.general_desc': 'Basic store details and preferences',
    'settings.store_name': 'Store Name',
    'settings.currency': 'Currency',
    'settings.address': 'Address',
    'settings.appearance': 'Appearance & Locale',
    'settings.appearance_desc': 'Customize the look and feel',
    'settings.dark_mode': 'Dark Mode',
    'settings.dark_mode_desc': 'Switch between light and dark themes',
    'settings.language': 'Language',
    'settings.language_desc': 'System language (Bahasa Indonesia / English)',
    'settings.invoice': 'Invoice Template',
    'settings.invoice_desc': 'Customize receipt header and footer',
    'settings.invoice_header': 'Receipt Header',
    'settings.invoice_footer': 'Receipt Footer',
    'settings.save': 'Save Changes',
    'settings.cancel': 'Cancel',
    'reports.title': 'Transaction History',
    'reports.filter': 'Filter',
    'reports.all': 'All',
    'reports.today': 'Today',
    'reports.week': 'This Week',
    'reports.month': 'This Month',
    'reports.no_transactions': 'No transactions found',
    'reports.view_receipt': 'View Receipt',
    'reports.transactions': 'Transactions',
    'reports.count': 'transactions',
    'common.loading': 'Loading...',
    'common.error': 'Error',
    'common.success': 'Success',
    'common.configure': 'Configure your POS system.',
    'common.settings_saved': 'Settings saved successfully',
    'common.staff': 'Staff',
    'pos.transaction_success': 'Transaction Successful',
    'pos.transaction_failed': 'Transaction Failed',
    'pos.shift_opened': 'Shift Opened',
    'pos.shift_started': 'Shift started with',
    'pos.invalid_amount': 'Invalid Amount',
    'pos.enter_valid_cash': 'Please enter a valid starting cash amount.',
    'pos.no_active_shift': 'No active shift',
    'pos.count_cash': 'Ensure you have counted the physical cash in the drawer before confirming.',
    'settings.header_placeholder': 'Enter text to show at the top of receipts...',
    'settings.footer_placeholder': 'Enter text to show at the bottom of receipts...',
    'settings.select_currency': 'Select currency',
    'settings.select_language': 'Select language',
    'settings.lang_english': 'English',
    'settings.lang_indonesian': 'Bahasa Indonesia',
    'settings.currency_usd': 'USD ($)',
    'settings.currency_idr': 'IDR (Rp)',
    'settings.currency_eur': 'EUR (€)',
  },
  id: {
    'nav.dashboard': 'Dasbor',
    'nav.pos': 'Kasir',
    'nav.products': 'Produk',
    'nav.settings': 'Pengaturan',
    'nav.logout': 'Keluar',
    'pos.title': 'Kasir',
    'pos.search': 'Cari produk...',
    'pos.cart': 'Pesanan Saat Ini',
    'pos.empty_cart': 'Keranjang kosong',
    'pos.subtotal': 'Subtotal',
    'pos.tax': 'Pajak (10%)',
    'pos.total': 'Total',
    'pos.process_payment': 'Proses Pembayaran',
    'pos.payment_method': 'Metode Pembayaran',
    'pos.cash': 'Tunai',
    'pos.card': 'Kartu',
    'pos.qris': 'QRIS',
    'pos.ewallet': 'E-Wallet',
    'pos.confirm_payment': 'Konfirmasi Pembayaran',
    'pos.processing': 'Memproses...',
    'pos.cancel': 'Batal',
    'pos.low_stock': 'Stok Rendah',
    'pos.all': 'Semua',
    'pos.open_shift': 'Buka Shift Kasir',
    'pos.start_shift': 'Mulai Shift',
    'pos.starting_cash': 'Kas Awal',
    'pos.shift_open': 'Shift Dibuka sejak',
    'pos.cash_received': 'Uang Diterima',
    'pos.transaction_id': 'ID Transaksi',
    'receipt.title': 'Struk',
    'receipt.print': 'Cetak Struk',
    'receipt.new_sale': 'Penjualan Baru',
    'receipt.thank_you': 'Terima kasih atas pembelian Anda!',
    'receipt.date': 'Tanggal',
    'receipt.cashier': 'Kasir',
    'receipt.payment': 'Pembayaran',
    'receipt.items': 'Item',
    'products.title': 'Produk',
    'products.add': 'Tambah Produk',
    'products.edit': 'Edit Produk',
    'products.delete': 'Hapus',
    'products.name': 'Nama',
    'products.category': 'Kategori',
    'products.price': 'Harga',
    'products.stock': 'Stok',
    'products.image': 'URL Gambar',
    'products.save': 'Simpan',
    'dashboard.title': 'Dasbor',
    'dashboard.subtitle': 'Ringkasan performa toko (7 hari terakhir)',
    'dashboard.total_revenue': 'Total Pendapatan',
    'dashboard.revenue': 'Total Pendapatan',
    'dashboard.transactions': 'Transaksi',
    'dashboard.avg_sale': 'Rata-rata Penjualan',
    'dashboard.low_stock': 'Stok Rendah',
    'dashboard.need_restock': 'Perlu restok',
    'dashboard.last_7_days': '7 hari terakhir',
    'dashboard.per_transaction': 'Per transaksi',
    'dashboard.weekly_revenue': 'Pendapatan Mingguan',
    'dashboard.weekly_desc': 'Performa penjualan harian 7 hari terakhir',
    'dashboard.sales_trend': 'Tren Penjualan (7 Hari)',
    'dashboard.top_products': 'Produk Terlaris',
    'dashboard.top_products_desc': 'Produk dengan penjualan tertinggi',
    'dashboard.no_data': 'Tidak ada data',
    'settings.title': 'Pengaturan',
    'settings.general': 'Konfigurasi Umum',
    'settings.general_desc': 'Detail toko dan preferensi dasar',
    'settings.store_name': 'Nama Toko',
    'settings.currency': 'Mata Uang',
    'settings.address': 'Alamat',
    'settings.appearance': 'Tampilan & Bahasa',
    'settings.appearance_desc': 'Sesuaikan tampilan dan nuansa',
    'settings.dark_mode': 'Mode Gelap',
    'settings.dark_mode_desc': 'Beralih antara tema terang dan gelap',
    'settings.language': 'Bahasa',
    'settings.language_desc': 'Bahasa sistem (Bahasa Indonesia / English)',
    'settings.invoice': 'Template Struk',
    'settings.invoice_desc': 'Sesuaikan header dan footer struk',
    'settings.invoice_header': 'Header Struk',
    'settings.invoice_footer': 'Footer Struk',
    'settings.save': 'Simpan Perubahan',
    'settings.cancel': 'Batal',
    'reports.title': 'Riwayat Transaksi',
    'reports.filter': 'Filter',
    'reports.all': 'Semua',
    'reports.today': 'Hari Ini',
    'reports.week': 'Minggu Ini',
    'reports.month': 'Bulan Ini',
    'reports.no_transactions': 'Tidak ada transaksi',
    'reports.view_receipt': 'Lihat Struk',
    'reports.transactions': 'Transaksi',
    'reports.count': 'transaksi',
    'common.loading': 'Memuat...',
    'common.error': 'Error',
    'common.success': 'Berhasil',
    'common.configure': 'Konfigurasi sistem POS Anda.',
    'common.settings_saved': 'Pengaturan berhasil disimpan',
    'common.staff': 'Staf',
    'pos.transaction_success': 'Transaksi Berhasil',
    'pos.transaction_failed': 'Transaksi Gagal',
    'pos.shift_opened': 'Shift Dibuka',
    'pos.shift_started': 'Shift dimulai dengan',
    'pos.invalid_amount': 'Jumlah Tidak Valid',
    'pos.enter_valid_cash': 'Masukkan jumlah kas awal yang valid.',
    'pos.no_active_shift': 'Tidak ada shift aktif',
    'pos.count_cash': 'Pastikan Anda telah menghitung uang tunai di laci sebelum konfirmasi.',
    'settings.header_placeholder': 'Masukkan teks untuk ditampilkan di atas struk...',
    'settings.footer_placeholder': 'Masukkan teks untuk ditampilkan di bawah struk...',
    'settings.select_currency': 'Pilih mata uang',
    'settings.select_language': 'Pilih bahasa',
    'settings.lang_english': 'English',
    'settings.lang_indonesian': 'Bahasa Indonesia',
    'settings.currency_usd': 'USD ($)',
    'settings.currency_idr': 'IDR (Rp)',
    'settings.currency_eur': 'EUR (€)',
  },
};

export const useI18n = create<I18nState>()(
  persist(
    (set, get) => ({
      language: 'en',
      setLanguage: (lang: Language) => set({ language: lang }),
      t: (key: string) => {
        const { language } = get();
        return translations[language][key] || key;
      },
    }),
    {
      name: 'propos-language',
    }
  )
);
